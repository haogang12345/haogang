<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>订单地址</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/order.css">
    <link rel="stylesheet" href="css/reseat.css">

</head>

<body>
    <div class="header">
        <div class="header-top">
            <span class="header-l">中国大陆区域客服服务 400-8210-582</span>
            <h2>GUCCI</h2>
            <ul class="header-r">
                <li><a href="login.html">登录</a></li>
                <li><a href="shoppingcart.html">购物车</a></li>
            </ul>
        </div>
        <div class="header-bottom">
            <ul class="ul1">
                <li class=""><a href="#">礼品</a></li>
                <li class=""><a href="#">全新资讯</a></li>
                <li class="focus">
                    <a href="#">手袋</a>
                    <div class="list">
                        <ul class="left">
                            <li>
                                <a href="list.html">浏览所有</a>
                            </li>
                            <li>
                                <a href="list.html">Jackie 1961系列</a>
                            </li>
                            <li>
                                <a href="#">Gucci马街扣1955系列</a>
                            </li>
                            <li>
                                <a href="#">GG Marmont系列</a>
                            </li>
                            <li>
                                <a href="#">Dionysus系列</a>
                            </li>
                        </ul>
                        <ul class="right">
                            <li>
                                <a href="#">Sylvie 1969系列</a>
                            </li>
                            <li>
                                <a href="#">Ophidio系列</a>
                            </li>
                            <li>
                                <a href="#">链条包&肩背包</a>
                            </li>
                            <li>
                                <a href="#">迷你包</a>
                            </li>
                            <li>
                                <a href="#">斜挎包</a>
                            </li>
                        </ul>
                        <span></span>
                        <img src="img/bao.png" alt="">
                    </div>
                </li>

                <li class=""><a href="# ">女士</a></li>
                <li class=""><a href="# ">男士</a></li>
                <li class=""><a href="# ">童装</a></li>
                <li class=""><a href="# ">珠宝和腕表</a></li>
                <li class=""><a href="# ">美妆</a></li>
                <li class=""><a href="# ">家饰</a></li>
                <li class=""><a href="# ">古驰故事</a></li>
            </ul>
        </div>
    </div>
    <div id="content">
        <div class="content-l">
            <p class="p1">1.送货</p>
            <div class="div1">
                <p class="p2">
                    <p class="dizhi">送货地址</p>
                    <p class="xingming">姓名</p>
                    <p class="name" style="display: none;">请输入一个有效的姓名</p>
                    <input type="text" class="input1">
                    <p class="p3">
                        <span class="span1">省份</span>
                        <span class="span2">城市</span>
                        <span class="span3">区域</span>
                    </p>
                    <div class="div2">
                        <select name="" id="province"></select>
                        <select name="" id="city"></select>
                        <select name="" id="area"></select>
                    </div>
                    <p class="p4">地址</p>
                    <p class="address" style="display: none;">请输入一个有效的地址</p>
                    <input type="text" name="" id="addr" class="input2">
                    <p class="p5">手机号</p>
                    <p class="phone" style="display: none;">请输入一个有效的手机号</p>
                    <input type="text" name="" id="phon" class="input3">
                    <p class="p6">
                        <input type="checkbox" name="" id="" class="input4">
                        <span class="span4">设为我的默认地址</span>
                    </p>
                    <p class="p7">送货方式</p>
                    <div class="div3">
                        <p class="p8">SF(顺丰)</p>
                        <p class="p9">日常运费</p>
                    </div>
                    <p class="p10">发票</p>
                    <p class="p11">
                        <input type="checkbox" name="" id="" class="input5">
                        <span class="span5">需要发票</span>
                    </p>
                    <p class="p12" id="continue">继续</p>
                    <p class="p13">2.支付方式</p>
                </p>
            </div>

        </div>
        <div class="content-r">
            <div class="xiaoji">
                <p class="p1">
                    <span class="span1">小计</span>
                    <span class="span2">￥</span>
                    <span class="span3 xj">0</span>
                </p>
                <p class="p2">
                    <span class="span4">运费</span>
                    <span class="span5">免费</span>
                </p>
            </div>
            <div class="dingjia">
                <span class="span6">订单总价</span>
                <span class="span7">￥</span>
                <span class="span8 zj">0</span>
            </div>
            <div class="cuxiao">
                <p class="p3">促销码</p>
                <input type="text" class="input1">
                <p class="p4">提交</p>
                <p class="p5">提交</p>
            </div>
            <div class="xianshi">
                <span class="span9">显示订单中的商品（1）</span>
                <span class="span10">+</span>
            </div>
            <div class="xiala" style="display: none;">
                <img src="img/img3/3.8.png" alt="" style="width: 80px;height: 80px;" class="img1">
                <p class="p6"></p>
                <p class="p7">数量:
                    <span class="span12">1</span>
                </p>
                <p class="p8">价格:
                    <span class="span13">￥</span>
                    <span class="span14">1100</span>
                </p>
            </div>
        </div>
    </div>
    <div class="footer">
        <div class="footerContent">
            <div class="contentLeft">
                <ul class="ul1">
                    <li class="li1">
                        <span>专属服务</span>
                        <ul class="ul2">
                            <li>免费标准配送</li>
                            <li>免费礼品包装</li>
                        </ul>
                    </li>
                    <li class="li1">
                        <span>购物帮助</span>
                        <ul class="ul2">
                            <li>支付相关</li>
                            <li>配送</li>
                            <li>退货</li>
                            <li>发票</li>
                            <li>保养与维修</li>
                        </ul>
                    </li>
                    <li class="li1">
                        <span>关于公司</span>
                        <ul class="ul2">
                            <li>关于GUCCI</li>
                            <li>GUCCI EQUILIBRIUM</li>
                            <li>道德规范</li>
                            <li>职业发展</li>
                            <li>细则及条款</li>
                            <li>隐私与COOKIE</li>
                            <li>企业信息</li>
                        </ul>
                    </li>
                    <li class="li1">
                        <span>关注GUCCI</span>
                        <ul class="ul2">
                            <li>微信</li>
                            <li>微博</li>
                            <li>抖音</li>
                            <li>腾讯视频</li>
                            <li>小红书</li>
                            <li>在线顾问</li>
                            <li>400.8210.582</li>
                        </ul>
                    </li>
                    <li class="li1">
                        <span>需要帮助？</span>
                        <ul class="ul2">
                            <li>联系我们</li>
                            <li>常见问题</li>
                        </ul>
                    </li>
                </ul>
            </div>
            <div class="contentRight">
                <div class="concentRightTop">
                    <p>订阅GUCCI电子资讯</p>
                    <span>通过订阅，即代表您接受GUCCI的隐私政策条款</span>
                    <input type="text" placeholder="电子邮件地址">
                </div>
                <div class="concentRightMiddle">
                    <p>直营店查询</p>
                    <div class="sheng">
                        <input type="text" placeholder="请选择省">
                        <span>查询其他地区直营店</span>
                    </div>
                    <div class="shi">
                        <input type="text" placeholder="请选择市">
                        <span>预约门店服务</span>
                    </div>
                </div>
                <div class="concentRightBottom">
                    <img src="img/1.png" alt="">
                </div>
            </div>
            <div class="contentBottom">
                <ul>
                    <li>©2020 古驰（中国）贸易有限公司 保留所有权利</li>
                    <li>沪公网安备 31010602001727号</li>
                    <li>上海工商</li>
                    <li>沪公网安备 31010602001727号</li>
                </ul>
            </div>
        </div>
    </div>

    <script src="js/citys.js"></script>
    <script src="js/jquery.min.js"></script>
    <script>
        // 三级联动
        let province = $("#province")
        let city = $("#city")
        let area = $("#area")

        citys.forEach(item => {
                // 产生一个option，将数组中对应的省份名插入到select中
                let option = $(`<option>${item.provinceName}</option>`);
                province.append(option)
            })
            // 产生一个option，将数组中对应的城市份名插入到select中
        citys[0].mallCityList.forEach(item => {
                let option = $(`<option>${item.cityName}</option>`);
                city.append(option)
            })
            // 产生一个option，将数组中对应的区名插入到select中
        citys[0].mallCityList[0].mallAreaList.forEach(item => {
            let option = $(`<option>${item.areaName}</option>`);
            area.append(option)
        })

        province.change(function() {
            updataCity.call(this);
            updataArea.call(city[0]);
        })
        city.change(function() {
            updataArea.call(this)
        })

        function updataCity() {
            city.html("")
                // 返回当前选中的选择项在其select标签中的下标
            cityList = citys[this.selectedIndex].mallCityList;
            cityList.forEach(item => {
                let option = $(`<option>${item.cityName}</option>`);
                city.append(option)
            })
        }

        function updataArea() {
            area.html("")
            let areaList = cityList[this.selectedIndex].mallAreaList;
            areaList.forEach(item => {
                let option = $(`<option>${item.areaName}</option>`);
                area.append(option)
            })
        }

        $(".content-r .p4").mouseenter(function() {
            $(this).fadeOut()
            $(".content-r .p5").fadeIn()
        })
        $(".content-r .p5").mouseleave(function() {
            $(this).fadeOut()
            $(".content-r .p4").fadeIn()
        })

        $(".xj").html(localStorage.getItem("count"))


        $("#continue").click(function() {
            if ($(".content-l .input1").val() && $(".content-l .input2").val() && $(".content-l .input3").val()) {
                // location.href=`dingdan.html`
                localStorage.setItem("postname", $(".content-l .input1").val())
                localStorage.setItem("postaddress", $(".content-l .input2").val())
                localStorage.setItem("postphone", $(".content-l .input3").val())
                    // alert(1)
            } else {
                if (!$(".content-l .input1").val()) {
                    $(".name")[0].style.display = "block"
                    $(".name")[0].style.color = "#BF2136"
                    $(".content-l .input1")[0].style.borderColor = "#BF2136"
                }
                if (!$(".content-l .input2").val()) {
                    $(".address")[0].style.display = "block"
                    $(".address")[0].style.color = "#BF2136"
                    $(".content-l .input2")[0].style.borderColor = "#BF2136"
                }
                if (!$(".content-l .input3").val()) {
                    $(".phone")[0].style.display = "block"
                    $(".phone")[0].style.color = "#BF2136"
                    $(".content-l .input3")[0].style.borderColor = "#BF2136"
                }
            }
            console.log(localStorage.getItem("userid"))
            let userid = localStorage.getItem("userid")
            let count = localStorage.getItem("count")
            console.log(userid, count)
            let goodsid = localStorage.getItem("goodsid")
            let postname = localStorage.getItem("postname")
            let postphone = localStorage.getItem("postphone")
            let postaddress = localStorage.getItem("postaddress")
            let username = localStorage.getItem("username")
            console.log(username)
            location.href = "dingdan.html"
            $.ajax({
                url: `http://10.35.164.34:8080/neworder`,
                data: {
                    userid,
                    goodsid,
                    count,
                    postname,
                    postphone,
                    postaddress,
                    username
                },
                success(data) {
                    if (data === "success") {
                        location.href = "dingdan.html"
                    }
                }
            })
        })

        $(".xianshi").click(function() {
            $(".xiala").slideToggle()
        })

        $(".content-r .xj").html(localStorage.getItem("count"))
        $(".content-r .zj").html(localStorage.getItem("count"))
    </script>

</body>

</html>